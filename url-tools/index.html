<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Meta Tags -->
    <title>
      URL Encoder &amp; Decoder Online | Tools Pack - RFC 3986 Compliant
    </title>
    <link rel="stylesheet" href="/assets/style.css" />
    <meta
      name="description"
      content="Encode or decode full URLs and URI components instantly. Safe for query parameters and path segments. Works locally in your browser with RFC 3986 compliance."
    />
    <meta
      name="keywords"
      content="url encoder, url decoder, uri encoder, percent encoding, query parameter encoder, url escape, uri decode, web tools"
    />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
    <meta name="theme-color" content="#1E1E2F" />

    <!-- Canonical & hreflang -->
    <link rel="canonical" href="https://tools-pack.netlify.app/url-tools/" />
    <link
      rel="alternate"
      hreflang="en"
      href="https://tools-pack.netlify.app/url-tools/"
    />
    <link
      rel="alternate"
      hreflang="bn"
      href="https://tools-pack.netlify.app/bn/url-tools/"
    />
    <link
      rel="alternate"
      hreflang="x-default"
      href="https://tools-pack.netlify.app/url-tools/"
    />

    <!-- Open Graph Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Tools Pack" />
    <meta property="og:title" content="URL Encoder/Decoder — Tools Pack" />
    <meta
      property="og:description"
      content="Encode/decode URL or URI components — fast &amp; private."
    />
    <meta
      property="og:url"
      content="https://tools-pack.netlify.app/url-tools/"
    />
    <meta property="og:locale" content="en_US" />
    <meta
      property="og:image"
      content="https://tools-pack.netlify.app/assets/og/url-tools-en.webp"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="URL Encoder &amp; Decoder — Tools Pack"
    />

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="URL Encoder/Decoder — Tools Pack" />
    <meta
      name="twitter:description"
      content="Encode/decode URLs or URI components in your browser — no uploads."
    />
    <meta
      name="twitter:image"
      content="https://tools-pack.netlify.app/assets/og/url-tools-en.webp"
    />

    <!-- Structured Data: WebApplication -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "@id": "https://tools-pack.netlify.app/url-tools/#app",
        "name": "URL Encoder/Decoder",
        "url": "https://tools-pack.netlify.app/url-tools/",
        "description": "Encode/decode full URLs and URI components (query params, path segments) locally in your browser with RFC 3986 compliance.",
        "applicationCategory": "Utility",
        "operatingSystem": "All",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "image": "https://tools-pack.netlify.app/assets/og/url-tools-en.webp",
        "browserRequirements": "Requires JavaScript",
        "softwareVersion": "1.0",
        "author": { "@type": "Organization", "name": "Tools Pack" }
      }
    </script>

    <!-- Structured Data: BreadcrumbList -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://tools-pack.netlify.app/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Text Tools",
            "item": "https://tools-pack.netlify.app/#text"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "URL Encoder/Decoder",
            "item": "https://tools-pack.netlify.app/url-tools/"
          }
        ]
      }
    </script>

    <!-- Structured Data: FAQ -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What's the difference between encodeURI and encodeURIComponent?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "encodeURIComponent is for individual components (like query values or path segments) and escapes more characters. encodeURI is for full URLs and leaves reserved characters like : / ? & = intact."
            }
          },
          {
            "@type": "Question",
            "name": "Can I paste a full URL and still use Encode?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, but if you intend to encode only a parameter value, encode the value, not the whole URL, to avoid over-encoding reserved characters."
            }
          },
          {
            "@type": "Question",
            "name": "Why does plus (+) decode to space?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "In application/x-www-form-urlencoded form data, + represents a space. This tool converts + to spaces before decoding to be helpful."
            }
          },
          {
            "@type": "Question",
            "name": "Is this URL encoder safe and private?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, everything runs locally in your browser. No URLs or data are uploaded, logged, or stored on any server."
            }
          }
        ]
      }
    </script>

    <style>
      /* ===========================================
   URL Encoder/Decoder — Local (page-specific)
   Only include on this tool’s page
   =========================================== */
      :root {
        --primary: #3b82f6;
        --primary-hover: #2563eb;
        --secondary: #64748b;
        --success: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --background: #0f172a;
        --surface: #1e293b;
        --surface-light: #334155;
        --text: #f1f5f9;
        --text-muted: #c4cdd6;
        --border: #475569;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      /* If you want a unique hero tint for this tool only, override tool-card here: */
      .tool-card {
        background: linear-gradient(
          135deg,
          var(--surface) 0%,
          rgba(59, 130, 246, 0.08) 100%
        );
      }

      /* Mode selector (tabs) */
      .mode-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }
      .mode-option {
        background: var(--background);
        border: 2px solid var(--border);
        border-radius: 1rem;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }
      .mode-option:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
      }
      .mode-option.active {
        border-color: var(--primary);
        background: rgba(59, 130, 246, 0.1);
      }
      .mode-option h3 {
        color: var(--primary);
        margin-bottom: 0.5rem;
        font-size: 1.125rem;
      }
      .mode-option p {
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      /* Panel containers toggled by JS */
      .tool-mode {
        display: none;
      }
      .tool-mode.active {
        display: block;
      }

      /* URL Parser mode */
      .url-parser {
        display: none;
        background: var(--background);
        border-radius: 1rem;
        padding: 1.5rem;
        margin-top: 1.5rem;
        border: 1px solid var(--border);
      }
      .url-parser.active {
        display: block;
        animation: slideDown 0.3s ease-out;
      }

      .url-parts {
        display: grid;
        gap: 1rem;
        margin-top: 1rem;
      }
      .url-part {
        display: grid;
        grid-template-columns: 100px 1fr;
        gap: 1rem;
        align-items: center;
        padding: 0.75rem;
        background: var(--surface);
        border-radius: 0.5rem;
        border: 1px solid var(--border);
      }
      .url-part-label {
        font-weight: 600;
        color: var(--primary);
        font-size: 0.875rem;
      }
      .url-part-value {
        font-family: monospace;
        color: var(--success);
        word-break: break-all;
      }

      /* Query Editor mode */
      .query-editor {
        display: none;
        background: var(--background);
        border-radius: 1rem;
        padding: 1.5rem;
        margin-top: 1.5rem;
        border: 1px solid var(--border);
      }
      .query-editor.active {
        display: block;
        animation: slideDown 0.3s ease-out;
      }

      .query-params {
        display: grid;
        gap: 1rem;
        margin: 1rem 0;
      }
      .query-param {
        display: grid;
        grid-template-columns: 1fr 1fr auto;
        gap: 0.5rem;
        align-items: center;
        padding: 1rem;
        background: var(--surface);
        border-radius: 0.75rem;
        border: 1px solid var(--border);
      }
      .query-param input {
        background: var(--background);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        padding: 0.5rem;
        color: var(--text);
        font-family: monospace;
      }
      .controls .btn-secondary {
        background-color: var(--secondary);
        color: #000000;
      }

      .controls .btn-success {
        background-color: var(--success);
        color: #050505;
      }
      /* Mobile tweaks only this page needs */
      @media (max-width: 768px) {
        .mode-selector {
          grid-template-columns: 1fr;
        }
        .url-part {
          grid-template-columns: 1fr;
          text-align: center;
        }
        .query-param {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <header class="sticky">
      <div class="wrap brand">
        <a href="/" class="logo" aria-label="Tools Pack Home">
          <img src="/assets/logo.png" alt="Tools Pack" width="60" height="60" />
        </a>
        <div>
          <h1 class="site-title" style="margin: 0">
            URL Tools — Encode & Decode
          </h1>
          <div class="sub">Safely encode and decode full URLs</div>
        </div>
        <div style="margin-left: auto">
          <a class="muted" href="/bn/url-tools/" hreflang="bn">বাংলা</a>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="ad-wrap ad-article" aria-label="Advertisement">
        <span class="ad-label">Ad</span>
        <div class="ad-content">
          Upgrade to Base64 Pro for unlimited conversions and advanced features!
        </div>
      </div>
      <!-- Breadcrumbs -->
      <nav class="breadcrumbs" aria-label="breadcrumb">
        <a href="/">Home</a> › <a href="/#text">Text Tools</a> ›
        <span>URL Encoder/Decoder</span>
      </nav>
      <p class="toc" aria-label="Table of Contents">
        <a href="#encoder">URL Encoder &amp; Decoder</a> ·
        <a href="#where">Where to use </a> ·
        <a href="#best-practices">Best Practices</a> ·
        <a href="#details">Details</a> · <a href="#faq">FAQ</a> ·
        <a href="#related">Related tools</a>
      </p>
      <header class="header">
        <h2>URL Tools — Encode & Decode</h2>
        <p class="subtitle">
          Safely <strong>encode</strong> and <strong>decode</strong> full URLs
          or URI components. Fully <em>RFC 3986 compliant</em>, works entirely
          in your browser — <strong>no data uploads</strong>.
        </p>
        <span class="badge">RFC 3986 Compliant</span>
        <span class="badge">percent-encoding</span>
        <span class="badge">offline</span>
      </header>

      <!-- Main Tool -->
      <div class="card tool-card" id="encoder">
        <div class="mode-selector" role="tablist" aria-label="Modes">
          <div
            class="mode-option active"
            data-mode="encoder"
            role="tab"
            aria-selected="true"
            tabindex="0"
          >
            <h3>🔗 Encoder/Decoder</h3>
            <p>Encode/decode URLs and components</p>
          </div>
          <div
            class="mode-option"
            data-mode="parser"
            role="tab"
            aria-selected="false"
            tabindex="0"
          >
            <h3>🔍 URL Parser</h3>
            <p>Parse URLs into components</p>
          </div>
          <div
            class="mode-option"
            data-mode="query"
            role="tab"
            aria-selected="false"
            tabindex="0"
          >
            <h3>⚙️ Query Editor</h3>
            <p>Edit query parameters</p>
          </div>
        </div>

        <!-- Encoder/Decoder Mode -->
        <div
          class="tool-mode active"
          id="encoder-mode"
          role="tabpanel"
          aria-labelledby="mode-encoder"
        >
          <div class="form-group">
            <label class="form-label" for="input">Input URL or Component</label>
            <textarea
              class="form-textarea"
              id="input"
              placeholder="Enter URL, query value, or text to encode/decode..."
              rows="4"
            ></textarea>
          </div>

          <div class="controls">
            <button class="btn" id="encodeBtn" type="button">🔒 Encode</button>
            <button class="btn btn-secondary" id="decodeBtn" type="button">
              🔓 Decode
            </button>
            <button class="btn btn-success" id="copyBtn" type="button">
              📋 Copy Output
            </button>
          </div>

          <div class="form-group">
            <label class="form-label" for="output">Output</label>
            <textarea
              class="form-textarea output"
              id="output"
              placeholder="Encoded/decoded result will appear here..."
              readonly
              rows="4"
              aria-live="polite"
            ></textarea>
          </div>

          <div
            class="status"
            id="status"
            role="status"
            aria-live="polite"
          ></div>
        </div>

        <!-- URL Parser Mode -->
        <div
          class="url-parser"
          id="parser-mode"
          role="tabpanel"
          aria-labelledby="mode-parser"
        >
          <div class="form-group">
            <label class="form-label" for="parseInput">URL to Parse</label>
            <input
              class="form-input"
              id="parseInput"
              placeholder="https://example.com/path?param=value#hash"
              type="url"
            />
          </div>
          <button class="btn" id="parseBtn" type="button">🔍 Parse URL</button>
          <div class="url-parts" id="urlParts" aria-live="polite"></div>
        </div>

        <!-- Query Editor Mode -->
        <div
          class="query-editor"
          id="query-mode"
          role="tabpanel"
          aria-labelledby="mode-query"
        >
          <div class="form-group">
            <label class="form-label" for="baseUrl">Base URL</label>
            <input
              class="form-input"
              id="baseUrl"
              placeholder="https://example.com/path"
              type="url"
            />
          </div>

          <div class="controls">
            <button class="btn" id="addParamBtn" type="button">
              ➕ Add Parameter
            </button>
            <button class="btn btn-secondary" id="clearParamsBtn" type="button">
              🗑️ Clear All
            </button>
            <button class="btn btn-success" id="buildUrlBtn" type="button">
              🔗 Build URL
            </button>
          </div>

          <div class="query-params" id="queryParams"></div>

          <div class="form-group">
            <label class="form-label" for="finalUrl">Final URL</label>
            <textarea
              class="form-textarea output"
              id="finalUrl"
              placeholder="Built URL will appear here..."
              readonly
              rows="2"
            ></textarea>
          </div>
        </div>
      </div>
      <div class="ad-wrap ad-article" aria-label="Advertisement">
        <span class="ad-label">Ad</span>
        <div class="ad-content">
          Upgrade to Base64 Pro for unlimited conversions and advanced features!
        </div>
      </div>
      <!-- Examples -->
      <div class="card" id="where">
        <h2>Common Use Cases &amp; Examples</h2>
        <div class="examples">
          <div class="example">
            <div class="example-title">Encoding Query Parameters</div>
            <div class="example-content">
              Input: Hello World &amp; Special Characters!<br />
              Output: Hello%20World%20%26%20Special%20Characters%21
            </div>
          </div>
          <div class="example">
            <div class="example-title">Decoding URL Components</div>
            <div class="example-content">
              Input: https%3A//example.com/path%3Fquery%3Dvalue<br />
              Output: https://example.com/path?query=value
            </div>
          </div>
          <div class="example">
            <div class="example-title">Form Data (+ to space)</div>
            <div class="example-content">
              Input: search+query+with+spaces<br />
              Output: search query with spaces
            </div>
          </div>
        </div>
      </div>
      <div class="card" id="best-practices">
        <h2>Best Practices — What to Encode & How</h2>
        <div class="examples">
          <div class="example">
            <div class="example-title">🔑 Use the right function</div>
            <div class="example-content">
              <code>encodeURIComponent()</code> for query values;
              <code>encodeURI()</code> for whole URLs.
            </div>
          </div>

          <div class="example">
            <div class="example-title">📐 Follow RFC 3986</div>
            <div class="example-content">
              Spaces → <code>%20</code> (not <code>+</code>). Forms
              (<code>x-www-form-urlencoded</code>) may use <code>+</code>.
            </div>
          </div>

          <div class="example">
            <div class="example-title">🚫 Avoid double-encoding</div>
            <div class="example-content">
              Don’t re-encode already escaped values like <code>%20</code>.
            </div>
          </div>

          <div class="example">
            <div class="example-title">📂 Encode only segments</div>
            <div class="example-content">
              Encode path parts, not slashes (<code>/</code>) that separate
              them.
            </div>
          </div>

          <div class="example">
            <div class="example-title">🌐 Always UTF-8</div>
            <div class="example-content">
              Encode Unicode text (e.g., emoji, বাংলা) directly—no pre-escaping.
            </div>
          </div>

          <div class="example">
            <div class="example-title">🛡 Decode carefully</div>
            <div class="example-content">
              Only decode query values you control. Don’t decode whole URLs—
              keep safe escapes like <code>%2F</code> intact.
            </div>
          </div>
        </div>
      </div>

      <!-- Information Grid -->
      <div class="info-grid" id="details">
        <div class="card">
          <div class="info-section">
            <h3>🛠️ Features</h3>
            <ul>
              <li><strong>RFC 3986 compliant</strong> encoding/decoding</li>
              <li>
                <strong>Multiple modes:</strong> encoder, parser, query editor
              </li>
              <li>
                <strong>Component-safe encoding</strong> with encodeURIComponent
              </li>
              <li>
                <strong>Form data handling</strong> (+ to space conversion)
              </li>
              <li>
                <strong>URL parsing</strong> into protocol, host, path, query
              </li>
              <li><strong>Query parameter editor</strong> with add/remove</li>
              <li><strong>One-click copy</strong> to clipboard</li>
              <li>
                <strong>Completely private</strong> — no data leaves browser
              </li>
            </ul>
          </div>
        </div>

        <div class="card">
          <div class="info-section">
            <h3>📋 Use Cases</h3>
            <ul>
              <li>
                <strong>API development:</strong> safe query parameter encoding
              </li>
              <li><strong>Web debugging:</strong> decode malformed URLs</li>
              <li>
                <strong>SEO &amp; marketing:</strong> UTM parameter management
              </li>
              <li><strong>Form handling:</strong> process form-encoded data</li>
              <li>
                <strong>Link sharing:</strong> clean and encode share URLs
              </li>
              <li><strong>Data analysis:</strong> parse URLs from logs</li>
              <li><strong>Security testing:</strong> encode payloads safely</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- FAQ -->
      <div class="card faq-section" id="faq">
        <h2>FAQ</h2>

        <div class="faq-item">
          <button class="faq-question">
            What's the difference between encodeURI and encodeURIComponent?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer">
            <p>
              <code>encodeURIComponent</code> is for individual components (like
              query values or path segments) and escapes more characters.
              <code>encodeURI</code> is for full URLs and leaves reserved
              characters like <code>:/?&amp;=</code> intact.
            </p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            Can I paste a full URL and still use Encode?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer">
            <p>
              Yes. If you intend to encode only a parameter value, encode just
              the value to avoid over-encoding reserved characters.
            </p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            Why does plus (+) decode to space?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer">
            <p>
              In <code>application/x-www-form-urlencoded</code> form data,
              <code>+</code> represents a space. This tool converts
              <code>+</code> to spaces before decoding to be helpful.
            </p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            Is this tool private?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer">
            <p>
              Yes, everything runs locally in your browser. No data is uploaded,
              logged, or stored on any server.
            </p>
          </div>
        </div>
      </div>
      <article class="card" id="related">
        <h2>Related tools</h2>
        <p class="muted">More developer utilities:</p>
        <p>
          <a class="btn" href="/sha256/">SHA-256 Hash</a>
          <a class="btn" href="/json-formatter/">JSON Formatter</a>
          <a class="btn" href="/base64/">Base64 Encode/Decode</a>
          <a class="btn" href="/password-uuid/">Password Generator</a>
        </p>
        <p class="small">
          <span lang="bn">Prefer বাংলা?</span> Try the
          <a
            class="text-link"
            href="/bn/url-tools/"
            hreflang="bn"
            lang="bn"
            aria-label="বাংলা সংস্করণ"
            >বাংলা সংস্করণ</a
          >.
        </p>
      </article>
      <!-- Footer -->
      <footer>
        © <span id="y"></span> Tools Pack •
        <a class="text-link" href="/" aria-label="Tools Pack Home">Home</a> •
        <a
          class="text-link"
          href="/bn/url-tools/"
          hreflang="bn"
          lang="bn"
          aria-label="বাংলা সংস্করণ"
          >বাংলা</a
        >
      </footer>
    </div>

    <script>
      // Year
      document.getElementById("y").textContent = new Date().getFullYear();

      // Utility: RFC 3986 compliant encode for components (encodeURIComponent + extra replacements)
      function encodeRFC3986Component(str) {
        return encodeURIComponent(str).replace(
          /[!'()*]/g,
          (c) => "%" + c.charCodeAt(0).toString(16).toUpperCase()
        );
      }
      // Utility: RFC 3986 compliant encode for full URLs (encodeURI + extra replacements)
      function encodeRFC3986URI(str) {
        return encodeURI(str).replace(
          /[!'()*]/g,
          (c) => "%" + c.charCodeAt(0).toString(16).toUpperCase()
        );
      }

      // Heuristic: looks like a full URL?
      function looksLikeFullURL(s) {
        return (
          /^(?:[a-z][a-z0-9+.-]*:)?\/\//i.test(s) ||
          /^[a-z][a-z0-9+.-]*:/.test(s)
        );
      }

      // Status helper
      function setStatus(msg, ok = true) {
        const el = document.getElementById("status");
        el.textContent = msg;
        el.className = "status show " + (ok ? "success" : "error");
        clearTimeout(setStatus._t);
        setStatus._t = setTimeout(() => {
          el.className = "status";
          el.textContent = "";
        }, 1800);
      }

      // Encoder/Decoder handlers
      const inputEl = document.getElementById("input");
      const outputEl = document.getElementById("output");

      document.getElementById("encodeBtn").addEventListener("click", () => {
        const raw = inputEl.value || "";
        try {
          const encoded = looksLikeFullURL(raw)
            ? encodeRFC3986URI(raw)
            : encodeRFC3986Component(raw);
          outputEl.value = encoded;
          setStatus("Encoded ✓", true);
        } catch (e) {
          outputEl.value = "";
          setStatus("Encode failed: " + e.message, false);
        }
      });

      document.getElementById("decodeBtn").addEventListener("click", () => {
        let raw = inputEl.value || "";
        try {
          // Handle form-data plus-to-space
          raw = raw.replace(/\+/g, " ");
          let decoded;
          try {
            decoded = decodeURIComponent(raw);
          } catch {
            // Fallback: treat as full URL
            decoded = decodeURI(raw);
          }
          outputEl.value = decoded;
          setStatus("Decoded ✓", true);
        } catch (e) {
          outputEl.value = "";
          setStatus("Decode failed: " + e.message, false);
        }
      });

      document.getElementById("copyBtn").addEventListener("click", async () => {
        const txt = outputEl.value;
        if (!txt) return setStatus("Nothing to copy", false);
        try {
          await navigator.clipboard.writeText(txt);
          setStatus("Copied ✓", true);
        } catch {
          // Fallback
          outputEl.select();
          document.execCommand("copy");
          setStatus("Copied ✓", true);
        }
      });

      // Mode switching
      const modeButtons = document.querySelectorAll(".mode-option");
      const encoderPanel = document.getElementById("encoder-mode");
      const parserPanel = document.getElementById("parser-mode");
      const queryPanel = document.getElementById("query-mode");

      function setMode(mode) {
        document.querySelectorAll(".mode-option").forEach((b) => {
          const active = b.dataset.mode === mode;
          b.classList.toggle("active", active);
          b.setAttribute("aria-selected", active ? "true" : "false");
        });
        encoderPanel.classList.toggle("active", mode === "encoder");
        parserPanel.classList.toggle("active", mode === "parser");
        queryPanel.classList.toggle("active", mode === "query");
      }

      modeButtons.forEach((btn) => {
        btn.addEventListener("click", () => setMode(btn.dataset.mode));
        btn.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            setMode(btn.dataset.mode);
          }
        });
      });

      // Parser
      const parseInput = document.getElementById("parseInput");
      const parseBtn = document.getElementById("parseBtn");
      const urlParts = document.getElementById("urlParts");

      parseBtn.addEventListener("click", () => {
        const u = parseInput.value.trim();
        urlParts.innerHTML = "";
        if (!u) return;
        try {
          const url = new URL(u);
          const parts = [
            ["protocol", url.protocol],
            ["origin", url.origin],
            ["username", url.username],
            ["password", url.password ? "••••••" : ""],
            ["host", url.host],
            ["hostname", url.hostname],
            ["port", url.port],
            ["pathname", url.pathname],
            ["search", url.search],
            ["hash", url.hash],
          ];
          parts.forEach(([label, val]) => {
            if (val === "") return;
            const row = document.createElement("div");
            row.className = "url-part";
            row.innerHTML = `
            <div class="url-part-label">${label}</div>
            <div class="url-part-value">${val}</div>
          `;
            urlParts.appendChild(row);
          });
          setStatus("Parsed ✓", true);
        } catch (e) {
          setStatus("Invalid URL: " + e.message, false);
        }
      });

      // Query Editor
      const paramsWrap = document.getElementById("queryParams");
      document.getElementById("addParamBtn").addEventListener("click", () => {
        const row = document.createElement("div");
        row.className = "query-param";
        row.innerHTML = `
        <input type="text" placeholder="key" aria-label="Parameter key">
        <input type="text" placeholder="value" aria-label="Parameter value">
        <button type="button" class="btn btn-danger btn-small">✖</button>
      `;
        row
          .querySelector("button")
          .addEventListener("click", () => row.remove());
        paramsWrap.appendChild(row);
      });

      document
        .getElementById("clearParamsBtn")
        .addEventListener("click", () => {
          paramsWrap.innerHTML = "";
          document.getElementById("finalUrl").value = "";
        });

      document.getElementById("buildUrlBtn").addEventListener("click", () => {
        const base = document.getElementById("baseUrl").value.trim();
        if (!base) {
          setStatus("Enter a base URL", false);
          return;
        }
        let url;
        try {
          url = new URL(base);
        } catch (e) {
          setStatus("Invalid base URL", false);
          return;
        }

        // Build search params
        const sp = new URLSearchParams(url.search);
        paramsWrap.querySelectorAll(".query-param").forEach((row) => {
          const [k, v] = row.querySelectorAll("input");
          if (k.value) sp.set(k.value, v.value);
        });
        url.search = sp.toString() ? "?" + sp.toString() : "";
        document.getElementById("finalUrl").value = url.toString();
        setStatus("URL built ✓", true);
      });
    </script>
    <script src="/assets/tracker.js" defer data-trk-site="tools-pack"></script>
    <script src="/assets/related-more.js" defer></script>
    <script src="/assets/script.js" defer></script>
  </body>
</html>
