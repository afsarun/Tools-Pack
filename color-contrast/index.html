<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Color Picker & Contrast Checker — WCAG 2.1 | Tools Pack</title>
    <meta
      name="description"
      content="Pick colors and check contrast ratio for accessibility."
    />
    <link
      rel="canonical"
      href="https://tools-pack.netlify.app/color-contrast/"
    />
    <link rel="stylesheet" href="../assets/style.css" />
    <meta name="theme-color" content="#1E1E2F" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Color Picker & Contrast — Tools Pack" />
    <meta property="og:description" content="Contrast ratios for AA/AAA." />
    <meta
      property="og:url"
      content="https://tools-pack.netlify.app/color-contrast/"
    />
    <meta
      property="og:image"
      content="https://tools-pack.netlify.app/og/color.png"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Color Picker & Contrast",
        "url": "https://tools-pack.netlify.app/color-contrast/",
        "applicationCategory": "Utility",
        "operatingSystem": "All",
        "description": "Check WCAG contrast ratios.",
        "inLanguage": "en"
      }
    </script>
  </head>
  <body>
    <header class="sticky">
      <div class="wrap brand">
        <a href="/"><div class="logo"></div></a>
        <div>
          <h1 style="margin: 0">Color Picker + Contrast</h1>
          <div class="sub">WCAG 2.1</div>
        </div>
      </div>
    </header>
    <main class="wrap">
      <article class="card">
        <div class="row">
          <label
            class="field"
            style="display: flex; align-items: center; gap: 10px"
            ><input id="fg" type="color" value="#FFFFFF" />
            <input id="fgHex" class="field mono" value="#FFFFFF" /><button
              class="btn"
              id="copyFg"
            >
              Copy
            </button></label
          >
          <label
            class="field"
            style="display: flex; align-items: center; gap: 10px"
            ><input id="bg" type="color" value="#000000" />
            <input id="bgHex" class="field mono" value="#000000" /><button
              class="btn"
              id="copyBg"
            >
              Copy
            </button></label
          >
        </div>
        <div
          class="grid"
          style="grid-template-columns: repeat(12, 1fr); gap: 10px"
        >
          <div
            id="sA"
            class="field"
            style="grid-column: span 6; padding: 16px; border-radius: 12px"
          >
            <div class="muted small">Normal text</div>
            <div>Almost before we knew it, we had left the ground.</div>
          </div>
          <div
            id="sB"
            class="field"
            style="grid-column: span 6; padding: 16px; border-radius: 12px"
          >
            <div class="muted small">Large text</div>
            <div style="font-size: 20px; font-weight: 700">
              Sphinx of black quartz, judge my vow.
            </div>
          </div>
        </div>
        <div id="result" class="status"></div>
      </article>
    </main>
    <footer>© <span id="y"></span> Tools Pack</footer>
    <script>
      y.textContent = new Date().getFullYear();
      const norm = (h) => {
        let s = h.trim().toUpperCase();
        if (!s.startsWith("#")) s = "#" + s;
        if (s.length === 4)
          s = "#" + [...s.slice(1)].map((ch) => ch + ch).join("");
        return s.slice(0, 7);
      };
      const hex3 = (h) => {
        const x = parseInt(h.slice(1), 16);
        return { r: (x >> 16) & 255, g: (x >> 8) & 255, b: x & 255 };
      };
      const lin = (c) => {
        c /= 255;
        return c <= 0.04045 ? c / 12.92 : ((c + 0.055) / 1.055) ** 2.4;
      };
      const L = ({ r, g, b }) =>
        0.2126 * lin(r) + 0.7152 * lin(g) + 0.0722 * lin(b);
      const ratio = (F, B) => {
        const L1 = L(hex3(F)),
          L2 = L(hex3(B));
        const [hi, lo] = L1 >= L2 ? [L1, L2] : [L2, L1];
        return (hi + 0.05) / (lo + 0.05);
      };
      const apply = () => {
        const f = norm(fgHex.value),
          b = norm(bgHex.value);
        fg.value = f;
        bg.value = b;
        fgHex.value = f;
        bgHex.value = b;
        sA.style.color = f;
        sA.style.background = b;
        sB.style.color = f;
        sB.style.background = b;
        const r = ratio(f, b),
          aa = r >= 4.5,
          aal = r >= 3,
          aaa = r >= 7;
        result.innerHTML = `Contrast: <b class="mono">${r.toFixed(
          2
        )}:1</b> • <span class="${aa ? "ok" : "bad"}">AA (normal) ${
          aa ? "PASS" : "FAIL"
        }</span> • <span class="${aal ? "ok" : "bad"}">AA (large) ${
          aal ? "PASS" : "FAIL"
        }</span> • <span class="${aaa ? "ok" : "bad"}">AAA (normal) ${
          aaa ? "PASS" : "FAIL"
        }</span>`;
      };
      [fg, bg, fgHex, bgHex].forEach((el) =>
        el.addEventListener("input", (e) => {
          if (e.target === fg) fgHex.value = fg.value;
          if (e.target === bg) bgHex.value = bg.value;
          apply();
        })
      );
      copyFg.onclick = () => navigator.clipboard.writeText(fgHex.value);
      copyBg.onclick = () => navigator.clipboard.writeText(bgHex.value);
      apply();
    </script>
  </body>
</html>
